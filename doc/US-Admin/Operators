Internet Relay Chat Operator Etiquette Guide

January, 1991

Welcome! You've either been selected to be an IRC Operator or you have set
up your server and thus have taken on the dual task of IRC Server
Administrator and IRC Operator. Your future days will be filled with hours
of fun chatting on IRC, and then wondering why everyone you talked to went
away, because the links had apparently broken. 

Linking:
========

You will be assigned links from the IRC Routing Coordinators. Please use
these links and these links ONLY. The links have been designed to maximize
efficiency and make delays in chatting minimal. You will be given two
links, one to each regional backbone site. Connect to the primary site
first and then to the secondary site. You should not need to connect to any
other sites. You will be informed if this policy changes.

Kills and Walls:
===============

/kill and /wall are special operator commands. You should use them with
care, and only if absolutely needed. The format are as follows:
/kill USERNAME comment. comment can be a phrase of almost any length
(within reason) and should be used for specifying the reason of the kill.
example: /kill Trillian She's a Ghost
IRC Ghosts are created after a net split has occured and the net has yet to
relink. 

/wall PHRASE. This is used for an emergency command like the net is about
to split into little pieces, and everyone should reconfigure their links
as soon as possible. You will see a WALL when it happens, an operators
nickname will appear with # signs around it.
#Trillian# Server bucsd.bu.edu coming down for upgrade. Prepare to
reconfigure links.

/wallops PHRASE This is used to talk to ALL operators at once. It is not
often warranted, but is useful. Often, when there is an important IRC
situation that requires all the operators attention, /wallops is used. The
form for wallops is a nickname with ! signs around it.
!Trillian! Australia should leaf off of eris, not carry all the US traffic.


/TRACE command
/TRACE is useful to know what servers are connected to what. Sometimes
/trace can be confusing, especially you are using it for the first time.
Here is an example of a trace from bucsd.bu.edu to betwixt.cs.caltech.edu.

/TRACE betwixt.cs.caltech.edu
*** Link bucsd.bu.edu<2.5.1.bu.10> ==> betwixt.cs.caltech.edu
*** Link garfield.mit.edu<2.5.1.bu.09a> ==> betwixt.cs.caltech.edu
*** Link lyman.pppl.gov<2.5.1.bu.09a>1 ==> betwixt.cs.caltech.edu
*** Connection betwixt.cs.caltech.edu ==> gigantor.cs.uq.oz.au
*** Connection betwixt.cs.caltech.edu ==> toaster.sfsu.edu
*** User betwixt.cs.caltech.edu ==> Thumper[through.cs.caltech.edu]
*** Connection betwixt.cs.caltech.edu ==> byron.u.washington.edu
*** Connection betwixt.cs.caltech.edu ==> lyman.pppl.gov
*** Connection betwixt.cs.caltech.edu ==> paris.ics.uci.edu


This shows that from bucsd.bu.edu (running version 2.5.1.bu.10) to
betwixt.cs.caltech.edu, routing goes through garfield.mit.edu and
lyman.pppl.gov before reaching beach. Betwixt is connected to
gigantor.cs.uq.oz.au, toaster.sfsu.edu, byron.u.washington.edu,
lyman.pppl.gov and paris.ics.uci.edu. Betwixt also has one user
"Thumper" on from through.cs.caltech.edu. lyman.pppl.gov is called its
"uplink" because this is the link towards the top of the tree which
carries most of the traffic.


/SQUIT server {server2}
   /squit isolates a specified link from the next closest uplink server.
This is usually used in conjunction with CONNECT (explained later) to
reroute traffic. This will be described in detail in the section
"routing", preceding CONNECT.
   SQUIT can be used in one of two ways. It can be used on a local
server, which would cause the server name specified to be unlinked
relative to your path; or you can send a message to another server
instructing it to issue an SQUIT to that server, in which case the
break will be relative to the remote server.

   Usage (and examples): 

      /squit E

     If the network looks like this initially (and you are on server A)

 
          A <---> B <---> C <---> D
                          ^
                          |
                          v
                  G <---> E <---> F <---> ... (rest of the net)
                          

    Then after issuing the previous /squit the network would look like this:

          A <---> B <---> C <---> D
                          
                          
                  G <---> E <---> F <---> ...


    /squit E F

    By specifying two servers, this tells the second server to squit
    the first, i.e. if the network looked as it did previously, then
    it would now look like this (You are still on server A):

         A <---> B <---> C <---> D
                         ^
                         |
                         v
                 G <---> E      F <---> ... 

    We have now caused server F to squit server E. Notice that the
    second server is the one you want the SQUIT to be relative to.


/CONNECT server {portnum server2}
   /connect is used to establish a link between two servers. These
connections must be authorized by each server's ircd.conf file, but
any operator can issue a CONNECT between authorized servers. This
command is most often used in conjunction with SQUIT to reroute
traffic. 
   If only one argument is given, this command causes the server you
are on to attempt to connect to the server specified. For example,
"/connect B" (in the previous example) would cause your server (A) to
connect to B. 
   Suppose you wanted to reconnect server F to server E? You cannot
contact server F since it is no longer part of your network. However,
you can tell server E to connect to it. A remote CONNECT can be issued
to server E. 

   Examples (assume you are on server A):

   /connect B

   If the network initially looks like this:

         A      B <---> ... (rest of network)

   Then afterwards (if the connection succeeds) the network will look
   like this:

        A <---> B <---> ... 


   In the example where you wanted to reconnect server E to F, the
   following syntax would be appropriate (note: we are assuming that
   F's irc socket port is 6667, which is the default)

   /connect F 6667 E

   If the network initially looks like this:

         A <---> B <---> C <---> D
                         ^
                         |
                         v
                 G <---> E      F <---> ... 

   Then after your CONNECT request the network topology will look like this:

         A <---> B <---> C <---> D
                         ^
                         |
                         v
                 G <---> E <---> F <---> ... 

    Be careful when connecting servers that you know which command to
    use! If you simply issued "/connect F" from your server, the
    network would look like this:


    ... <---> F <--->  A <---> B <---> C <---> D
                                       ^
                                       |
                                       v
                               G <---> E 

    which for various reasons (discussed below) might be very
    undesirable. 

Routing
=======

   When and how should you do rerouting? This depends on where your
server is topologically located and whether you route traffic. If you
are a leaf node (i.e. only connect to one server at a time) then
chances are you won't need to do any routing at all.  Your ircd.conf
file should be written to connect to the best possible servers first
before trying alternates. At the most, you may decide to squit an
alternate server and connect to your primary if/when it goes back up.
This only involves local squits, however.

   If you are operating a backbone site, you may find yourself
rerouting things quite often. If the EFnet servers (see the file
doc/networking) betwixt.cs.caltech.edu (Pasadena, CA),
garfield.mit.edu (Boston, MA), minnie.cc.utexas.edu (Austin, TX) and
tavi.rice.edu (Houston, TX) were routing traffic in the following way:

    ... <---> minnie <---> betwixt <---> bucsd <---> tavi <---> ...

It would make sense to either squit tavi and reconnect it to minnie,
or disconnect minnie from betwixt and connect to tavi, because
topologically (and geographically) tavi and minnie are rather close. 
There are occasions when US traffic for some reasons winds up being
routed through Australia. This is another case where traffic should
definitely be rerouted. 

   Of course, any operator can remotely squit or connect servers, so
if you see a problem and you're sure you know how to fix it, it's a
good idea to do so. If the operator of a server which is is being
routed poorly is online, it's probably best to contact him/her first,
though.
   Chances are that hub operators will be more familiar with the
general topology of the network and which servers connect to which
(which is why most of the manual routing is left to them), so if you
have any problems, talk to the other operators via /wallops. That's
what it's there for!
   Also, be aware that servers will notify all the operators online of
remote SQUITs and CONNECTs via WALLOPS.

Please let us know if there should be any additions to this guide. Again,
this is not MANDATORY, this is just a GUIDE. Please conduct yourself as 
an IRC Operator would...you are looked upon for assistance, both emotional
and mental. 

Helen Rose			Christopher Davis
<hrose@cs.bu.edu>		<ckd@cs.bu.edu>

Noah Friedman
<friedman@ai.mit.edu>

January, 1991
