dnl
dnl --------------------------------------------------------------------------
dnl                         IRC configuration file (ircd.conf)
dnl --------------------------------------------------------------------------
dnl files needed in the ircd.conf directory: ircd.conf, ircd.m4, ircd.m4ext
dnl Check out the file `m4ext.doc' for the complete syntax.
dnl $Id: example.conf.m4ext,v 2.1 1993/11/15 15:36:11 pioch Exp pioch $
dnl
dnl --------------------------------------------------------------------------
dnl                         SERVER INFORMATION
dnl --------------------------------------------------------------------------

define(`SERVERNAME', `sil.polytechnique.fr')
define(`SERVERTEXT', `Ecole Polytechnique, Paris, FRANCE')
define(`SERVERPORT', `6667')

define(`ADMINLOCATION', `Ecole Polytechnique, Paris, FRANCE')
define(`ADMINISTRATOR', `IRC-Administrator Nicolas PIOCH (Nap@IRC)')
define(`ADMIN_EMAIL',   `<Nicolas.Pioch@enst.fr>')

dnl --------------------------------------------------------------------------
dnl                         CONNECTION CLASSES
dnl --------------------------------------------------------------------------

define(`SERVER_SENDQ',      `400000')
define(`SERVER_MAXCONNECT', `20')
define(`UPLINK_CONNECT',    `100')
define(`AUTOCON_CONNECT',   `300')

dnl The extended m4 macros should be loaded now. Leave that here.
include(`ircd.m4ext')dnl
dnl --------------------------------------------------------------------------
dnl                         AUTORIZED CLIENTS
dnl --------------------------------------------------------------------------

# Allow guest connections (put them in a special class...)
GUEST_DOAUTH(*)

# Allow clients from France
CLIENT_DOAUTH(NoMatch,*.fr)

# No auth needed for local clients, we don't run authd here.
CLIENT_NOAUTH(192.48.98.*,*.polytechnique.fr)
CLIENT_NOAUTH(129.104.*,NoMatch)

# Put unix socket connections into the client class
CLIENT_NOAUTH(*/*)

dnl --------------------------------------------------------------------------
dnl                         AUTORIZED OPERATORS
dnl --------------------------------------------------------------------------

# Setup server operators
OPERATOR(Nap,*@*.polytechnique.fr,xqeZNstoBMDtc)

dnl --------------------------------------------------------------------------
dnl                         KILLED USERS
dnl --------------------------------------------------------------------------

# Get rid of unwanted clients
CLIENT_KILLED(*,root)
CLIENT_KILLED(*.oxy.edu)

dnl --------------------------------------------------------------------------
dnl                         LISTEN TO ADDITIONNAL PORTS
dnl --------------------------------------------------------------------------

# Setup additionnal ports to listen to
ADD_PORT(6667,/tmp/.ircd)
ADD_PORT(6666)

dnl --------------------------------------------------------------------------
dnl                         SERVER CONNECTIONS
dnl --------------------------------------------------------------------------

# This is a downlink which can introduce any server for france.
# They use AUTHD do I can put "irc@" in the server part.
# The NPasswd field is empty because it's the same as the CPasswd.

SERVER_DOWNLINK(irc@eurecom8.cica.fr,zzz,,eurecom8.cica.fr)
SERVER_HUB(eurecom8.cica.fr,*.fr)

# Another downlink, they don't run AUTHD.

SERVER_DOWNLINK(dafne.mines.u-nancy.fr,passhere)
SERVER_HUB(dafne.mines.u-nancy.fr,*.fr)
SERVER_HUB(dafne.mines.u-nancy.fr,*.be)

# A Leaf that can introduce 5 server max.

SERVER_DOWNLINK(cyclone.enst.fr,hello)
SERVER_LEAF(cyclone.enst.fr,,5)

# *.fi is hostmasked! can you believe that? :)

SERVER_DOWNLINK(128.214.6.100,finally,npasswd-here,*.fi)
SERVER_HUB(*.fi)

# The list of my uplinks, HUBS for the whole network.

SERVER_UPLINK(irc-2.mit.edu,hidog)
SERVER_HUB(irc-2.mit.edu)

SERVER_UPLINK(eff.org,hihelen)
SERVER_HUB(eff.org)

# End of ircd.conf
